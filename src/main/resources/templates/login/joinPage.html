{{>common/header}}
<script src="http://code.jquery.com/jquery-latest.js"></script>

<script type="text/javascript">
	$(function(result){		
		if($("#joinForm").submit(function(result){
            var id = $("#userId").val();
            if (id.match(/\s/g) || id.length == 0) {
                alert("공백은 ID로 사용할 수 없습니다.");
				$("#userId").val("").focus();
                return false;
            } else if ($("#userPw").val() !== $("#userPw2").val()){
				alert("PW가 서로 다릅니다.");
				$("#userPw").val("").focus();
				$("#userPw2").val("");
				return false;
			} else if($.trim($("#userPw").val()) !== $("#userPw").val()){
				alert("공백은 PW로 사용할 수 없습니다.");
				$("#userPw").val("").focus();
				$("#userPw2").val("");
				return false;
            } else if ($("#userPw").val().length <= 4) {
				alert("PW가 4자리 이하입니다.");
				$("#userPw").val("").focus();
				$("#userPw2").val("");
				return false;
            } else if (!!($("#userPhNmb").val().match(/^01(?:0|1|[6-9])-?\\d{3,4}-?\\d{4}$/))) {
				alert("올바른 전화번호 형식이 아닙니다.");
				$("#userPhNmb").val("").focus();
				return false;
            }
		}));
	})

    $(document).ready(function() {
        $("#userPw2").on("focusout", function() {
        if($("#userPw").val() !== $("#userPw2").val()) {
            $("#label2").css("color", "red").text("PW가 서로 다릅니다.");
            return false;
        } else if ($("#userPw").val().match(/\s/g)) {
            $("#label2").css("color", "red").text("공백은 PW로 사용할 수 없습니다.");
            return false;
        } else if ($("#userPw").val().length <= 4) {
            $("#label2").css("color", "red").text("PW가 4자리 이하입니다.");
            return false;
        } else if($("#userPw").val() == $("#userPw2").val()) {
            $("#label2").css("color", "black").text("사용 가능한 PW 입니다.");
            return true;
        }
    })})

    $(document).ready(function() {
        //ID 중복 확인
        //id를 입력할 수 있는 input text 영역을 벗어나면 동작한다.
        $("#userId").on("focusout", function() {
            
            var id = $("#userId").val();
            
            if(id.match(/\s/g) || id.length == 0) {
                $("#label1").css("color", "red").text("공백은 ID로 사용할 수 없습니다.");
                return false;
                }

            //Ajax로 전송
            $.ajax({
                url : './ConfirmId',
                data : {
                    id : id
                },
                type : 'POST',
                dataType : 'json',
                success : function(result) {
                    if (result == true) {
                        $("#label1").css("color", "black").text("사용 가능한 ID 입니다.");
                    } else {
                        $("#label1").css("color", "red").text("사용 불가능한 ID 입니다.");
                        $("#userId").focus();
                    }
                }
            }); //End Ajax
        });
    })

    $(document).ready(function() {
        // Email 중복 확인
        $("#userEmail").on("focusout", function() {
            
            var email = $("#userEmail").val();

            if(!email.match(/^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/)) {
                $("#label3").css("color", "red").text("올바른 Email 형식이 아닙니다.");
                return false;
                }

            //Ajax로 전송
            $.ajax({
                url : './ConfirmEmail',
                data : {
                    email : email
                },
                type : 'POST',
                dataType : 'json',
                success : function(result) {
                    if (result == true) {
                        $("#label3").css("color", "black").text("사용 가능한 Email 입니다.");
                    } else {
                        $("#label3").css("color", "red").text("사용 불가능한 Email 입니다.");
                    }
                }
            }); //End Ajax
        });
    })

    $(document).ready(function() {
        // Email 중복 확인
        $("#userEmail").on("focusout", function() {
            
            var email = $("#userEmail").val();

            if(!email.match(/^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/)) {
                $("#label3").css("color", "red").text("올바른 Email 형식이 아닙니다.");
                return false;
                }

            //Ajax로 전송
            $.ajax({
                url : './ConfirmEmail',
                data : {
                    email : email
                },
                type : 'POST',
                dataType : 'json',
                success : function(result) {
                    if (result == true) {
                        $("#label3").css("color", "black").text("사용 가능한 Email 입니다.");
                    } else {
                        $("#label3").css("color", "red").text("사용 불가능한 Email 입니다.");
                    }
                }
            }); //End Ajax
        });
    })
</script>

<body>
    
    <div class="menu_content d-flex flex-column align-items-center justify-content-left text-center">
        <div class="menu_close_container"><div class="menu_close"></div></div>
        <h1>Join Page</h1>
        <form id="joinForm" action="/join" method="post">
            <label for="id">* Id: </label>
            <input type="text" id="userId" name="userId" placeholder="아이디를 입력하세요." required autofocus>
            <br>
            <small>공백 제외, 영문, 숫자 조합</small> 
            <br>
            <label id="label1"></label>
            <!-- <button>중복 확인</button> -->
            <br>
            <label for="pwd">* Password: </label>
            <input type="password" id="userPw" name="userPw" placeholder="비밀번호를 입력하세요." required>
            <br>
            <small>최소 4자리 이상의 영문, 숫자, 특수문자 조합</small>
            <br>
            <label for="pwd_equal"> Password 확인: </label>
            <input type="password" id="userPw2" name="userPw2" placeholder="비밀번호 확인">
            <br>
            <label id="label2"></label>
            <!-- <button>패스워드 확인</button> -->
            <br>
            <label for="email">* Email: </label>
            <input type="email" id="userEmail" name="userEmail" placeholder="이메일을 입력하세요." required>
            <br>
            <label id="label3"></label>
            <!-- <button>이메일 확인</button> -->
            <br>
            <label for="name">* Name: </label>
            <input type="text" name="userNm" placeholder="이름을 입력하세요." required>
            <br>
            <label for="gender">Gender: </label>
            <label for="Male">Male</label>
            <input type="radio" id="Male" name="userSex" value="Male" checked>
            <label for="Male">Female</label>
            <input type="radio" id="Female" name="userSex" value="Female">
            <br>
            <label for="phone">* Phone: </label>
            <input type="phone" id="userPhNmb" name="userPhNmb" placeholder="전화번호를 입력하세요.">
            <label id="label4"></label>
            <!-- <button>번호 확인</button> -->
            <br>
            <input type="submit" value="회원가입">
            <!-- submit 버튼을 누르면 post 방식으로 컨트롤에게 요청 -->
            <!-- dto로 받아서 서비스로 전달 -> mysql에 저장 -->
        </form>
        <a href="/loginPage">
            <input type="submit" value="로그인 화면 이동">
        </a>
        <a href="/index">
            <input type="submit" value="홈으로 이동">
        </a>

</body>

{{>common/footer}}	